<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OMR Scanner - Admin Dashboard</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Mobile Menu Button -->
    <button id="mobile-menu-btn" class="mobile-menu-btn">
        <svg id="menu-icon" width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <line x1="3" y1="12" x2="21" y2="12"></line>
            <line x1="3" y1="6" x2="21" y2="6"></line>
            <line x1="3" y1="18" x2="21" y2="18"></line>
        </svg>
        <svg id="close-icon" width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="display: none;">
            <line x1="18" y1="6" x2="6" y2="18"></line>
            <line x1="6" y1="6" x2="18" y2="18"></line>
        </svg>
    </button>

    <!-- Overlay for mobile menu -->
    <div id="mobile-overlay" class="mobile-overlay"></div>

    <!-- Sidebar -->
    <aside id="sidebar" class="sidebar">
        <div class="sidebar-header">
            <h1 class="sidebar-title">OMR Scanner</h1>
            <p class="sidebar-subtitle">Admin Dashboard</p>
        </div>
        <nav class="sidebar-nav">
            <a href="#home" class="nav-link" data-page="home">
                <svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
                    <polyline points="9 22 9 12 15 12 15 22"></polyline>
                </svg>
                <span>Home</span>
            </a>
            <a href="#upload" class="nav-link" data-page="upload">
                <svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                    <polyline points="17 8 12 3 7 8"></polyline>
                    <line x1="12" y1="3" x2="12" y2="15"></line>
                </svg>
                <span>Upload Sheets</span>
            </a>
            <a href="#results" class="nav-link" data-page="results">
                <svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                    <polyline points="14 2 14 8 20 8"></polyline>
                    <line x1="16" y1="13" x2="8" y2="13"></line>
                    <line x1="16" y1="17" x2="8" y2="17"></line>
                    <polyline points="10 9 9 9 8 9"></polyline>
                </svg>
                <span>Results</span>
            </a>
        </nav>
        <div class="sidebar-footer">
            <button id="logout-btn" class="logout-btn">
                <svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
                    <polyline points="16 17 21 12 16 7"></polyline>
                    <line x1="21" y1="12" x2="9" y2="12"></line>
                </svg>
                <span>Logout</span>
            </button>
        </div>
    </aside>

    <!-- Main Content -->
    <main id="app" class="main-content">
        <!-- Login Page -->
        <div id="login-page" class="page">
            <div class="login-container">
                <div class="login-card">
                    <div class="login-header">
                        <div class="login-icon">
                            <svg width="32" height="32" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
                                <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
                            </svg>
                        </div>
                        <h1 class="login-title">OMR Scanner</h1>
                        <p class="login-subtitle">Admin Login</p>
                    </div>
                    <div id="login-error" class="error-message" style="display: none;"></div>
                    <form id="login-form" class="login-form">
                        <div class="form-group">
                            <label for="username">Username</label>
                            <div class="input-with-icon">
                                <svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                                    <circle cx="12" cy="7" r="4"></circle>
                                </svg>
                                <input type="text" id="username" class="input-field" placeholder="Enter username" required>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="password">Password</label>
                            <div class="input-with-icon">
                                <svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
                                    <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
                                </svg>
                                <input type="password" id="password" class="input-field" placeholder="Enter password" required>
                            </div>
                        </div>
                        <button type="submit" class="btn-primary btn-large">Login</button>
                    </form>
                    <div class="demo-credentials">
                        <p><strong>Demo Credentials:</strong> admin / admin123</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Home Page -->
        <div id="home-page" class="page" style="display: none;">
            <div class="page-container">
                <div class="page-header">
                    <h1 class="page-title">Welcome to OMR Scanner Dashboard</h1>
                    <p class="page-subtitle">Monitor your scanned sheets and view analytics</p>
                </div>
                <div id="stats-grid" class="stats-grid"></div>
                <div class="card">
                    <h2 class="card-title">Quick Actions</h2>
                    <div class="quick-actions-grid">
                        <a href="#upload" class="quick-action-card">
                            <svg width="48" height="48" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                                <polyline points="14 2 14 8 20 8"></polyline>
                                <line x1="12" y1="18" x2="12" y2="12"></line>
                                <line x1="9" y1="15" x2="15" y2="15"></line>
                            </svg>
                            <h3>Upload Sheets</h3>
                            <p>Upload answer keys and student sheets</p>
                        </a>
                        <a href="#results" class="quick-action-card quick-action-green">
                            <svg width="48" height="48" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <polyline points="22 12 18 12 15 21 9 3 6 12 2 12"></polyline>
                            </svg>
                            <h3>View Results</h3>
                            <p>Check scanned results and rankings</p>
                        </a>
                        <div class="quick-action-card quick-action-gray">
                            <svg width="48" height="48" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                                <circle cx="9" cy="7" r="4"></circle>
                                <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
                                <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
                            </svg>
                            <h3>Reports</h3>
                            <p>Generate detailed reports</p>
                        </div>
                    </div>
                </div>
                <div class="card card-primary">
                    <h2 class="card-title-white">Getting Started</h2>
                    <p class="card-text-white">Follow these steps to scan and evaluate OMR sheets:</p>
                    <ol class="steps-list">
                        <li>Upload the answer key (CSV, XLSX, or TXT format)</li>
                        <li>Upload student answer sheets</li>
                        <li>Select the class/grade</li>
                        <li>Click "Scan Sheets" to process</li>
                        <li>View and download results from the Results page</li>
                    </ol>
                </div>
            </div>
        </div>

        <!-- Upload Page -->
        <div id="upload-page" class="page" style="display: none;">
            <div class="page-container-narrow">
                <div class="page-header">
                    <h1 class="page-title">Upload Sheets</h1>
                    <p class="page-subtitle">Upload answer keys and student sheets to scan</p>
                </div>
                <div class="card">
                    <h2 class="card-title">Section 1: Upload Answer Key</h2>
                    <div id="answer-key-dropzone" class="dropzone">
                        <input type="file" id="answer-key-input" accept=".csv,.xlsx,.txt" style="display: none;">
                        <label for="answer-key-input" class="dropzone-label">
                            <svg width="48" height="48" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                                <polyline points="17 8 12 3 7 8"></polyline>
                                <line x1="12" y1="3" x2="12" y2="15"></line>
                            </svg>
                            <p class="dropzone-text">Drag & drop files here, or click to browse</p>
                            <p class="dropzone-hint">Accepted formats: .csv, .xlsx, .txt</p>
                        </label>
                    </div>
                    <div id="answer-key-files" class="file-list"></div>
                    <p class="help-text">Format: Each row should contain question number and correct answer (e.g., 1,A)</p>
                </div>
                <div class="card">
                    <h2 class="card-title">Section 2: Upload Student Sheets</h2>
                    <div id="student-sheets-dropzone" class="dropzone">
                        <input type="file" id="student-sheets-input" accept=".csv,.xlsx,.txt" multiple style="display: none;">
                        <label for="student-sheets-input" class="dropzone-label">
                            <svg width="48" height="48" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                                <polyline points="17 8 12 3 7 8"></polyline>
                                <line x1="12" y1="3" x2="12" y2="15"></line>
                            </svg>
                            <p class="dropzone-text">Drag & drop files here, or click to browse</p>
                            <p class="dropzone-hint">Accepted formats: .csv, .xlsx, .txt</p>
                        </label>
                    </div>
                    <div id="student-sheets-files" class="file-list"></div>
                    <p class="help-text">Format: name, roll_number, answer1, answer2, ... (one student per row)</p>
                </div>
                <div class="card">
                    <h2 class="card-title">Section 3: Select Class</h2>
                    <div class="form-group">
                        <label for="class-select">Class/Grade</label>
                        <select id="class-select" class="input-field">
                            <option value="">Select a class</option>
                            <option value="Class 9">Class 9</option>
                            <option value="Class 10">Class 10</option>
                            <option value="Class 11">Class 11</option>
                            <option value="Class 12">Class 12</option>
                        </select>
                    </div>
                </div>
                <div class="card-center">
                    <button id="scan-btn" class="btn-primary btn-large">
                        <span id="scan-btn-text">Scan Sheets</span>
                        <span id="scan-loader" class="spinner" style="display: none;"></span>
                    </button>
                    <div id="scan-complete" class="scan-complete" style="display: none;">
                        <svg width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
                            <polyline points="22 4 12 14.01 9 11.01"></polyline>
                        </svg>
                        <span>Scan Complete! Redirecting...</span>
                    </div>
                </div>
                <div id="demo-notice" class="card card-warning">
                    <p><strong>Demo Mode:</strong> You can click "Scan Sheets" without uploading files to see a demo with mock data.</p>
                </div>
            </div>
        </div>

        <!-- Results Page -->
        <div id="results-page" class="page" style="display: none;">
            <div class="page-container">
                <div class="page-header-row">
                    <div>
                        <h1 class="page-title">Results</h1>
                        <p class="page-subtitle">View and download scanned OMR sheet results</p>
                    </div>
                    <div class="export-controls">
                        <select id="export-format" class="input-field-inline">
                            <option value="csv">CSV</option>
                            <option value="excel">Excel (.xlsx)</option>
                            <option value="pdf">PDF</option>
                        </select>
                        <button id="export-btn" class="btn-primary">
                            <svg width="18" height="18" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                                <polyline points="7 10 12 15 17 10"></polyline>
                                <line x1="12" y1="15" x2="12" y2="3"></line>
                            </svg>
                            <span>Download Results</span>
                        </button>
                    </div>
                </div>
                <div id="no-results" class="card card-empty" style="display: none;">
                    <svg width="64" height="64" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                        <polyline points="14 2 14 8 20 8"></polyline>
                    </svg>
                    <h3>No Results Available</h3>
                    <p>Upload and scan answer sheets to see results here</p>
                    <a href="#upload" class="btn-primary">Go to Upload</a>
                </div>
                <div id="results-table-container" class="card card-table">
                    <div class="table-container">
                        <table id="results-table" class="results-table">
                            <thead>
                                <tr>
                                    <th data-sort="rank">
                                        <div class="th-content">
                                            Rank
                                            <svg width="16" height="16" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                                <line x1="12" y1="5" x2="12" y2="19"></line>
                                                <polyline points="19 12 12 19 5 12"></polyline>
                                            </svg>
                                        </div>
                                    </th>
                                    <th data-sort="name">
                                        <div class="th-content">
                                            Student Name
                                            <svg width="16" height="16" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                                <line x1="12" y1="5" x2="12" y2="19"></line>
                                                <polyline points="19 12 12 19 5 12"></polyline>
                                            </svg>
                                        </div>
                                    </th>
                                    <th data-sort="rollNumber">
                                        <div class="th-content">
                                            Roll Number
                                            <svg width="16" height="16" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                                <line x1="12" y1="5" x2="12" y2="19"></line>
                                                <polyline points="19 12 12 19 5 12"></polyline>
                                            </svg>
                                        </div>
                                    </th>
                                    <th data-sort="class">
                                        <div class="th-content">
                                            Class
                                            <svg width="16" height="16" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                                <line x1="12" y1="5" x2="12" y2="19"></line>
                                                <polyline points="19 12 12 19 5 12"></polyline>
                                            </svg>
                                        </div>
                                    </th>
                                    <th data-sort="marks">
                                        <div class="th-content">
                                            Marks
                                            <svg width="16" height="16" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                                <line x1="12" y1="5" x2="12" y2="19"></line>
                                                <polyline points="19 12 12 19 5 12"></polyline>
                                            </svg>
                                        </div>
                                    </th>
                                    <th>Score</th>
                                </tr>
                            </thead>
                            <tbody id="results-tbody"></tbody>
                        </table>
                    </div>
                </div>
                <div id="summary-stats" class="card card-info" style="display: none;">
                    <h3 class="summary-title">Summary Statistics</h3>
                    <div id="summary-grid" class="summary-grid"></div>
                </div>
            </div>
        </div>
    </main>

    <!-- External Libraries -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.4.1/papaparse.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.7.1/jspdf.plugin.autotable.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>
    
    <!-- Main Application Script -->
    <script src="app.js"></script>
</body>
</html>
